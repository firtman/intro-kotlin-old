{"pageProps":{"post":{"attributes":{},"html":"<p>We will create a set of classes responsible for managing the data of our app, a DataManager class in a new file <code>DataManager.kt</code>.</p>\n<pre><code class=\"hljs language-kotlin\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DataManager</span> </span>{\n    <span class=\"hljs-keyword\">var</span> menu: List&lt;Category&gt; <span class=\"hljs-keyword\">by</span> mutableStateOf(listOf())\n    <span class=\"hljs-keyword\">var</span> cart: List&lt;ItemInCart&gt; <span class=\"hljs-keyword\">by</span> mutableStateOf(listOf())\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">cartAdd</span><span class=\"hljs-params\">(product: <span class=\"hljs-type\">Product</span>)</span></span> {\n        <span class=\"hljs-keyword\">var</span> found = <span class=\"hljs-literal\">false</span>\n        cart.forEach {\n            <span class=\"hljs-keyword\">if</span> (product.id==it.product.id) {\n                it.quantity++\n                found = <span class=\"hljs-literal\">true</span>\n            }\n        }\n        <span class=\"hljs-comment\">// IMPORTANT: it&#x27;s a state, we have to change the whole list, not mutate its contents</span>\n        <span class=\"hljs-keyword\">if</span> (!found) {\n            cart = listOf(*cart.toTypedArray(), ItemInCart(product, <span class=\"hljs-number\">1</span>))\n        }\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">cartRemove</span><span class=\"hljs-params\">(product: <span class=\"hljs-type\">Product</span>)</span></span> {\n        <span class=\"hljs-keyword\">val</span> aux = cart.toMutableList()\n        aux.removeAll { it.product.id == product.id }\n        <span class=\"hljs-comment\">// IMPORTANT: it&#x27;s a state, we have to change the whole list, not mutate its contents</span>\n        cart = listOf(*aux.toTypedArray())\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">cartClear</span><span class=\"hljs-params\">()</span></span> {\n        <span class=\"hljs-comment\">// IMPORTANT: it&#x27;s a state, we have to change the whole list, not mutate its contents</span>\n        cart = listOf()\n    }\n\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">fun</span> <span class=\"hljs-title\">cartTotal</span><span class=\"hljs-params\">()</span></span>: <span class=\"hljs-built_in\">Double</span> {\n        <span class=\"hljs-keyword\">var</span> sum = <span class=\"hljs-number\">0.0</span>\n        <span class=\"hljs-keyword\">for</span> (item <span class=\"hljs-keyword\">in</span> cart) {\n            sum += item.quantity*item.product.price\n        }\n        <span class=\"hljs-keyword\">return</span> sum\n    }\n}\n</code></pre>\n","slug":"creating-the-data-manager","title":"Creating the Data Manager","section":"Working with Data","icon":"database","filePath":"/Users/firt/Library/Mobile Documents/com~apple~CloudDocs/Trainings/FEM/CompanionSite/intro-android/lessons/05-working-with-data/C-creating-the-data-manager.md","nextSlug":"/intro-android/lessons/using-APIs-and-JSON/adding-dependencies","prevSlug":"/intro-android/lessons/working-with-data/Designing-the-menu"}},"__N_SSG":true}